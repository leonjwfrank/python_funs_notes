# 分布的运算相关概念

##  单元格(cell)
    在卡方检验中，将观测按一定的标准分到各个单元格里，每个单元格代表一种分类

### 卡方检验概念(chi-square test)
    用卡方统计量做统计量的统计检验
    
### 交叉验证(cross-validation)
    交叉验证使用一个数据集进行探索性数据分析，然后用另一个数据集进行测试
    
### 假阴性(false negative)
    在效应真实存在的情况下，我们认为这个效应是由偶然因素引起的
    
### 假阳性(false positive)
    在原假设为真的情况下，我们认为这个效应是由偶然因素引起的
    
### 假设检验(hypothesis testing)
    判定出现的效应是否具有统计显著性的过程
    
### 似然比(likelihood ratio)
    一种概率比值，P(E|H) / P(E|N), 这里H和N是两种假设，似然比不依赖于先验概率
    可以用来报道 贝叶斯统计推断的结果
### 原假设(null hypothesis) 或称零假设
    一种基于以下假设的模型系统:
        我们观测到的效应只是由偶然因素引起的
### 单边检验(one-side test)
    一种检验类型，关注的是出现比观测到的效应更大(或小)的效应的概率

### P 值(p-value)
    在原假设成立时，出现我们观测到的效应的概率

### 功效(power)
    卡方
    在原假设为假的情况下，检验推翻原假设的概率
    
### 显著性(significant)
    我们说某个效应具有统计显著性指的是这种情况不大可能由偶然因素引起
    
### 检验统计量(test statistic)
    某种形式的离差平方和
    衡量观测到的效应于原假设下期望的结果之间的偏差 的统计量
    比如卡方统计量 
        X**2 = 𝜮(i) ((O_i - E_i) **2) /E_i
    
### 测试集(testing set)
    用作测试的数据集
 
### 训练集(training set)
    用做训练的数据集

### 双边检验(weo-sided test)
    一种检验类型，关注的是出现比观测到的效应更大的效应的概率。
    不考虑正负，只考虑绝对值
    
## 偏度(skewness)
    度量分布不对称程度的统计量一，偏度
    在经验分布中，25，75 百分等级可以用于检查分布是否对称，其差可表示分布的分散情况
    给定序列 x1， 样本偏度的定义:
        g1 = (m3/m2) ** (3/2)
    其中:
        m2 = 1/n ∑(i) (xi - 𝝁 mu) ** 2   # 均方离差(方差)
        m3 = 1/n ∑(i) (xi - 𝝁 mu) ** 3   # 立方离差
    负的偏度表示分布向左偏(skews left), 分布函数左边会比右边延伸更长
    正的偏度表示分布向右偏(skews right), 分布函数右边会延伸更长
    
    样本中的异常值会对偏度产生非常大的影响
    
    分布不对称程度的统计量二，比较均值和中位数的大小
        如果分布向左偏，均值小于中位数，反之亦然，如果均值大于中位数，分布向右偏
        
    鲁棒估计, 对异常值不敏感
        （Pearson's median skewness coefficient) 皮尔逊中值偏度系数基于以上 均值和中位数的对比
        𝝁 为均值， 𝝁_1/2 为中位数
        g_p = 3(𝝁 - 𝝁_1/2) / 𝛔
        
## 鲁棒性(robust)
    如果一个统计量不容易受到异常值的影响,那么这个统计量就具有 鲁棒性
 
## 基尼系数(Gini coefficient)
    衡量收入不平衡性的指标
       
## 概率密度函数(probability density function)一般表示什么意思
    1，各分布函数关系的表述
    累计分布函数(CDF)的 导数 称为概率密度函数 PDF,其值不表示概率，
        表示的是 一种 概率密度，它衡量的是x轴上每个单位的概率
    累计分布函数表示的是 值与百分等级 的映射，
        CDF(x) 表示 样本中小于等于 x 所占比例
    概率密度函数
        表示离散随机变量 X 在各特定取值上的概率
        在密度函数中 将随机变量取值的大小将其概率值进行累加，得到累计分布函数
    转变过程    
    PMF(非累计的) -求和-> CDF(累计的 CMF) -平滑-> CDF(连续的) -微分-> PDF -区间-> PMF
    PDF -积分-> CDF
    CDF(累计的)  -差分-> PMF
    
    2，公式化表述        
    指数分布的概率密度函数为:
        PDF_expo(x) = 𝝀* e **(-𝝀x)
    
    正态分布的概率密度函数为:
        PDF_normal(x) = (1/(𝛔√2𝝅)) * exp[-1/2 * ((x - 𝝁)/𝛔) ** 2] 
    
    分布函数的 均值可以看作分布的质心，方差看作是 转动惯量
    为了得到随机变量 落到某个分布概率， 我们可以计算密度函数在这段区间上的积分。
    设随机变量 X 的概率密度函数为 PDF_x, 那么 X 落在区间 [-0.5, 0.5]的概率为
        P(-0.5 <= X <= 0.5) = ∫(-05. 0.5)PDF_x(x) dx
    
    因为累计分布函数是 概率密度函数 的积分，上式也可也写成
        P9-0.5<= x <0.5) = CDF_x(0.5) - CDF_x(-0.5)
      
    计算X在某个区间的概率，可以用 累计分布函数 的解析表达式来计算
    如果无法得到累计分布函数的"解析表达式"，可以用"数值积分"的方法来计算 X 在某个区间的概率。
    
    # 例子
        人类平均高度，男性 178cm 方差59.4cm, 女性163cm，方差52.8cm，某公司要求男员工平均身高 178～185cm，全国有多少人满足这个条件？
        
## 卷积(convolution)如何推导，与正态分布有什么关系
    推导公式:
        有累计分布函数CDF_x 和 CDF_y
        Z = X+Y, Z 服从什么分布？
        1, P(Z<=z|X=x) = P(Y<=z-x)
            在给定X=x的条件下，X+Y小于z的概率，要使 X+Y小于z，就要求Y必须小于z-x
        2, 计算Y < z-x 的概率， Y的累计分布函数
           P(Y <= z-x) = CDF_y(z-x)
        3, 上述推导过程 X 为固定值，如果X 有一个取值范围，那么
           P(Z<=z) = ∫(∞, -∞)P(Z <=z|X=x)PDF_x(x)dx
           给定 X=x的条件下，随机变量Z 小于等于z的概率乘以 X=x的概率
        4，1，2带入 3
            P(Z<=z) = ∫(∞, -∞) CDF_y(z-x)PDF_x(x)dx   # 等式左边就是CDF的定义 P(Z<=z) = CDF_z(z)
        5，我们可以通过对CDF_z 求导 得到 PDF_z，有以下积分公式
            PDF_z(z) =  ∫(∞, -∞)PDF_y(z-x)PDF_x(x)dx
            
            以上等式表示 概率密度函数PDF_x 和PDF_y 的卷积(convolution) ,卷积运算一般用运算符 ❊ 表示
            PDF_z = PDF_y ❊ PDF_x
            
        ** 两个随机变量的和的分布，等于 两个概率密度的卷积
        设随机变量 X 和Y 服从参数为 𝝀 的指数分布，则随机变量Z=X+Y 的概率密度为:
            PDF_z(z) =  ∫(∞, -∞)PDF_x(x)PDF_y(z-x)dx =  ∫(∞, -∞)𝝀e**(-𝝀x)e**(𝝀(z-x))
        
        因为X 和 Y服从指数分布，取负数概率为0，所以我们可以对上述积分公式的下限调整:
            PDF_z(z) = ∫(z, 0)𝝀e**(-𝝀x)𝝀e**(-𝝀(z-x))fx
            PDF_z(z) = 𝝀**2e**(-𝝀z)∫(z, 0)dx = z𝝀**2e**(-𝝀z)
            即：
            PDF_z(z) = z𝝀**2e**(-𝝀z)
            这是参数为k 和 𝝀 的爱尔朗 分布的概率密度函数，k=2，所以两个有相同参数指数分布的卷积是一个爱尔朗分布。
    * 正态分布 对卷积运算是封闭的，参看笔记 连续分布 正态分布一节。
        一个随机变量X 服从 𝝁 和 𝝈 的正态分布，我们可以简记为:
            X ~ 𝜨(𝝁, 𝝈 )
        另有一个 随机变量X的线性变换 表达式: X' = aX + b
        这里a 和 b为实数，X' 和 X 属于同一分布族时，我们说该分布族对线性变换是 封闭的(closed)
        比如 正态分布 X ~ 𝜨(𝝁, 𝝈**2),
        那么  X' ~ N(a𝝁+b, 𝝈a**2 )


## 中心极限定理(Central Limit Theorem) 有什么性质
    1,性质:
        如果将一些服从正态分布的数据加起来，得到的和也服从正态分布
        如果将一些不服从正态分布的数据加起来，得到的结果一般情况下不会服从前面讲过的 连续分布
        如果将大量服从某种分布的值加起来，所得的和会 收敛到正态分布
    
    2,定义描述:
        假设随机变量 X 的均值和标准差 𝝁 和 𝝈，那么n个随机变量 X的和渐进地服从 N(n𝝁, n𝝈**2)
        上述描述 称为 中心极限定理(Central Limit Theorem)， 统计分析中非常重要的工具，有以下先决条件:
        1, 用于求和的数据必须满足独立性
        2, 数据必须服从同一个分布
        3, 产生这些数据分布的均值和方差必须有限(所以帕累托分布(pareto distributing)不满足此条件)
        4, 收敛速度取决于原来分布的偏度。 如果数据服从指数分布，那么数据的和很快会收敛，但是如果服从对数正态分布，那么收敛速度就没那么快来
        
    3,实例
        有指数分布序列(mean=32) 1000个，每个序列包含 1000个值
            random.expovariate(lambd=1/mean)
            该指数分布序列中，每个指数分布的和，构成一个 大小为1000的序列
            
            该指数分布和的序列 的分布，其累计分布函数CDF如下:
            可见其近似服从正态分布
            
   ![exponential_cdf_1000](./DiscriPng/central_limit_theorem_exponential_cdf_1000_sum.png)
        
        有对数正态分布序列(mu=0, sigma=1) 1000个，每个序列包含 1000个值
        该对数正态分布序列中，每个分布的和，构成一个 大小为1000的序列
        该分布和的序列 的分布，其累计分布函数CDF如下，近似服从正态分布:
        只有10个对数正态分布序列时，其和的序列分布情况
        
   ![lognormal_cdf_10](./DiscriPng/central_limit_theorem_lgncdf4_10_sum.png)
      
        有1000个对数正态分布序列，其和的序列分布情况
        
   ![lognormal_cdf_1000](./DiscriPng/central_limit_theorem_lgncdf4_1000_sum.png)
        
        有pareto分布序列(alpha = 1) 1000个，每个序列包含 1000个值
        该分布序列中，每个分布的和，构成一个 大小为1000的序列
        该分布和的序列 的分布，其累计分布函数CDF如下，
            * 不服从正态分布，因为pareto 分布 的均值和方差不固定
        只有10个pareto分布序列时，其和的序列分布情况
   
   ![pareto_sum_cdf_10](./DiscriPng/central_limit_theorem_pareto_cdf_10_sum.png)
   
        有1000个pareto分布序列，其分布的和的序列分布情况
    
   ![pareto_sum_cdf_1000](./DiscriPng/central_limit_theorem_pareto_cdf_1000_sum.png)
   
   
        有对数正态分布序列(mu=0, sigma=1) 100个，每个序列包含 100个值
        该对数正态分布序列中，每个分布的 **乘积**，构成一个 大小为100的序列
        该分布 乘积的序列 的分布，其累计分布函数CDF如下，不服从正态分布:
        有100个分布序列时，其乘积的序列分布情况
   ![log_normal_cdf_100](./DiscriPng/central_limit_theorem_lgncdf4_100_mutil_乘积.png)